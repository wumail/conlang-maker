# 词典

核心模块，以侧边栏 + 编辑面板的分栏布局管理所有词条。

**导航**：点击左侧 `词典`

## 词条管理

左侧面板显示所有词条列表，点击后右侧打开编辑器。

| 操作 | 说明 |
|------|------|
| 新增词条 | 点击侧边栏 `+` 按钮创建空白词条 |
| 编辑词条 | 右侧面板实时编辑，自动 debounce 保存（500ms） |
| 删除词条 | 编辑面板顶部删除按钮，需确认 |
| 搜索 | 按罗马音或释义文本过滤词条列表 |
| IPA 模糊搜索 | 开启 IPA 搜索模式，输入 IPA 按语音相似度排序结果 |
| 标签 | 逗号分隔的自由标签系统 |

## 义项

每个词条支持多个义项，每个义项包含：

- **词性 (POS)** — 从语法模块定义的词性列表中选择
- **简明释义 (Gloss)** — 用于行间标注的简短翻译
- **详细定义** — 多行完整释义
- **例句** — 多行用法示例

## IPA 自动生成

- 编辑罗马音时，自动通过罗马音映射表 → 音位变体规则生成 IPA
- 可锁定为手动模式（🔒），自由编写 IPA
- 解锁后（🔓）恢复自动生成

:::tip
只要词条的 IPA 处于自动模式（🔓），修改罗马音映射或音位变体规则后，再次打开词条时 IPA 会自动重新计算。
:::

## 发音播放

点击词条 IPA 旁的 🔊 按钮，通过拼接式 TTS 逐个播放音素音频，完全离线运行。

## 词源管理

| 来源类型 | 说明 |
|---------|------|
| 先验创造 (A priori) | 凭空创造 |
| 后验创造 (A posteriori) | 参考自然语言 |
| 演变 (Evolved) | 从父语言音变而来 |
| 借词 (Borrowed) | 从其他语言借入 |
| 混合 (Mixed) | 多来源混合 |
| 派生 (Derived) | 通过构词派生 |

每个词源可记录：父词条 ID、源语言 ID、已应用的音变规则、语义转移备注。

## 快速录入

点击右上角 ⚡ 按钮打开快速录入弹窗：

1. 输入 **单词**（罗马音）
2. 输入 **释义**
3. 选择 **词性**
4. 按 **Enter** 保存 → 自动清空，继续录入下一个
5. 按 **Esc** 关闭

:::tip
快速录入非常适合突然想到新词的时候，无需离开当前页面。弹窗会显示已保存的词条数量。
:::

## 质量检查

**导航**：`词典` → `质检`

对词典全量词条执行 6 条自动化检查规则：

| 规则 | 严重度 | 说明 |
|------|--------|------|
| 缺少词性 | 🔴 错误 | 义项未设置词性 |
| 未映射拼写 | 🟡 警告 | 拼写含不在罗马音映射表中的字符 |
| IPA 为空 | 🟡 警告 | 词条没有 IPA 音标 |
| 词形模式不匹配 | 🟡 警告 | 词形不满足词性的正则模式 |
| 缺少必填字段 | 🔴 错误 | 缺少词性要求的必填字段 |
| 重复词形 | 🟡 警告 | 词典中存在重复的罗马音拼写 |

- 每条规则可独立启用/禁用
- 单条问题可标记为「例外」
- 点击词条名称可跳转到词典编辑器

## 统计报告

**导航**：`词典` → `统计`

自动计算并可视化语言的统计数据：

- **词条总数** — 醒目的大号数字
- **词性分布** — 水平条形图，按词性分组
- **音素频率** — 柱状图，展示出现频率最高的 30 个 IPA 音素
- **字符频率** — 柱状图，展示出现频率最高的 30 个罗马音字符
- **二元组合 (Bigram)** — 热力图标签，展示最常见的 40 个双音素组合
- **音节结构分布** — 柱状图，按音节数分布
- **正字法速查表** — 完整的罗马音 → IPA 映射列表

:::tip
统计能帮你发现语言的"偏科"——比如音素太集中、某些词性词汇过少等。
:::
