# 历时音变引擎

定义和预览历时音变规则，模拟语言的历史演变。

**导航**：切换到子语言后，前往 `历时音变引擎`

## 字符模式

通过指定目标字符和替换字符来定义音变规则：

| 字段 | 说明 | 示例 |
|------|------|------|
| 目标 (Target) | 要替换的音素/字符（空格分隔） | `p t k` |
| 替换 (Replacement) | 替换为的音素/字符 | `b d g` |
| 前置环境 | 目标前面必须匹配的内容 | `V`（元音宏） |
| 后置环境 | 目标后面必须匹配的内容 | `V` |
| 例外 | 不应用此规则的词 | — |

支持宏展开：`V` 自动展开为元音列表，`C` 展开为辅音列表。

### 示例

"词间元音之间的清塞音浊化"：
- 目标：`p t k`
- 替换：`b d g`
- 前置环境：`V`
- 后置环境：`V`

## 特征模式

基于语音学特征定义更精确的音变规则：

- **目标特征**：用 `+`/`-` 指定目标音素特征（如 `[+voiced, -stop]`）
- **替换特征**：指定要设置/移除的特征
- **音素匹配**：实时显示匹配指定特征的所有音素
- **Jaccard 相似度**：特征替换后自动寻找最接近的 IPA 音素
- **特征倒排索引**：O(1) 查询加速

## 预览功能

- **单词测试**：输入单词 → 实时查看音变结果 + 逐步日志
- **批量预览**：对词典全量词条预览音变结果（前 100 个）
- **应用到词典**：一键将音变结果写回所有受影响的词条

### 使用步骤

1. 创建 **规则集**
2. 添加音变规则
3. 在 **预览** 中测试效果
4. 确认后点击 **「应用到词典」**
